
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{completion\_profiling}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Completion profiling}\label{completion-profiling}

Profiling avec cProfile, memory\_profiler, line\_profiler, pyinstrument,
snakeviz.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{o}{\PYZpc{}}\PY{k}{matplotlib} inline
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
        \PY{n}{plt}\PY{o}{.}\PY{n}{style}\PY{o}{.}\PY{n}{use}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ggplot}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{k+kn}{from} \PY{n+nn}{jyquickhelper} \PY{k}{import} \PY{n}{add\PYZus{}notebook\PYZus{}menu}
        \PY{n}{add\PYZus{}notebook\PYZus{}menu}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}2}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    \subsection{Setup}\label{setup}

    \subsubsection{Function to profile}\label{function-to-profile}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{k+kn}{from} \PY{n+nn}{mlstatpy}\PY{n+nn}{.}\PY{n+nn}{nlp}\PY{n+nn}{.}\PY{n+nn}{completion} \PY{k}{import} \PY{n}{CompletionTrieNode}
        
        \PY{k}{def} \PY{n+nf}{gain\PYZus{}dynamique\PYZus{}moyen\PYZus{}par\PYZus{}mot}\PY{p}{(}\PY{n}{queries}\PY{p}{,} \PY{n}{weights}\PY{p}{)}\PY{p}{:}
            \PY{n}{per} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{zip}\PY{p}{(}\PY{n}{weights}\PY{p}{,} \PY{n}{queries}\PY{p}{)}\PY{p}{)}
            \PY{n}{total} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{weights}\PY{p}{)} \PY{o}{*} \PY{l+m+mf}{1.0}
            \PY{n}{res} \PY{o}{=} \PY{p}{[}\PY{p}{]}
            \PY{n}{trie} \PY{o}{=} \PY{n}{CompletionTrieNode}\PY{o}{.}\PY{n}{build}\PY{p}{(}\PY{p}{[}\PY{p}{(}\PY{k+kc}{None}\PY{p}{,} \PY{n}{q}\PY{p}{)} \PY{k}{for} \PY{n}{\PYZus{}}\PY{p}{,} \PY{n}{q} \PY{o+ow}{in} \PY{n}{per}\PY{p}{]}\PY{p}{)}
            \PY{n}{trie}\PY{o}{.}\PY{n}{precompute\PYZus{}stat}\PY{p}{(}\PY{p}{)}
            \PY{n}{trie}\PY{o}{.}\PY{n}{update\PYZus{}stat\PYZus{}dynamic}\PY{p}{(}\PY{p}{)}
            \PY{n}{wks} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{n}{w}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{w}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{trie}\PY{o}{.}\PY{n}{min\PYZus{}keystroke0}\PY{p}{(}\PY{n}{w}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{p}\PY{p}{,} \PY{n}{w} \PY{o+ow}{in} \PY{n}{per}\PY{p}{]}
            \PY{n}{wks\PYZus{}dyn} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{n}{w}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{w}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{trie}\PY{o}{.}\PY{n}{min\PYZus{}dynamic\PYZus{}keystroke}\PY{p}{(}\PY{n}{w}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
                       \PY{k}{for} \PY{n}{p}\PY{p}{,} \PY{n}{w} \PY{o+ow}{in} \PY{n}{per}\PY{p}{]}
            \PY{n}{wks\PYZus{}dyn2} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{n}{w}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{w}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{trie}\PY{o}{.}\PY{n}{min\PYZus{}dynamic\PYZus{}keystroke2}\PY{p}{(}\PY{n}{w}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
                        \PY{k}{for} \PY{n}{p}\PY{p}{,} \PY{n}{w} \PY{o+ow}{in} \PY{n}{per}\PY{p}{]}
            \PY{n}{gain} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{g} \PY{o}{*} \PY{n}{p} \PY{o}{/} \PY{n}{total} \PY{k}{for} \PY{n}{w}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{g} \PY{o+ow}{in} \PY{n}{wks}\PY{p}{)}
            \PY{n}{gain\PYZus{}dyn} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{g} \PY{o}{*} \PY{n}{p} \PY{o}{/} \PY{n}{total} \PY{k}{for} \PY{n}{w}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{g} \PY{o+ow}{in} \PY{n}{wks\PYZus{}dyn}\PY{p}{)}
            \PY{n}{gain\PYZus{}dyn2} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{g} \PY{o}{*} \PY{n}{p} \PY{o}{/} \PY{n}{total} \PY{k}{for} \PY{n}{w}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{g} \PY{o+ow}{in} \PY{n}{wks\PYZus{}dyn2}\PY{p}{)}
            \PY{n}{ave\PYZus{}length} \PY{o}{=} \PY{n+nb}{sum}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{w}\PY{p}{)} \PY{o}{*} \PY{n}{p} \PY{o}{/} \PY{n}{total} \PY{k}{for} \PY{n}{p}\PY{p}{,} \PY{n}{w} \PY{o+ow}{in} \PY{n}{per}\PY{p}{)}
            \PY{k}{return} \PY{n}{gain}\PY{p}{,} \PY{n}{gain\PYZus{}dyn}\PY{p}{,} \PY{n}{gain\PYZus{}dyn2}\PY{p}{,} \PY{n}{ave\PYZus{}length}
\end{Verbatim}


    \subsubsection{Data}\label{data}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{k+kn}{from} \PY{n+nn}{mlstatpy}\PY{n+nn}{.}\PY{n+nn}{data}\PY{n+nn}{.}\PY{n+nn}{wikipedia} \PY{k}{import} \PY{n}{download\PYZus{}titles}
        \PY{n}{file\PYZus{}titles} \PY{o}{=} \PY{n}{download\PYZus{}titles}\PY{p}{(}\PY{n}{country}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{n+nb}{len}\PY{p}{(}\PY{n}{file\PYZus{}titles}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}5}]:} 33
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{k+kn}{from} \PY{n+nn}{mlstatpy}\PY{n+nn}{.}\PY{n+nn}{data}\PY{n+nn}{.}\PY{n+nn}{wikipedia} \PY{k}{import} \PY{n}{enumerate\PYZus{}titles}
        \PY{n}{list\PYZus{}titles} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{sorted}\PY{p}{(}\PY{n+nb}{set}\PY{p}{(}\PY{n}{\PYZus{}} \PY{k}{for} \PY{n}{\PYZus{}} \PY{o+ow}{in} \PY{n}{enumerate\PYZus{}titles}\PY{p}{(}\PY{n}{file\PYZus{}titles}\PY{p}{)} \PY{k}{if} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{n}{\PYZus{}}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Z}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{k+kn}{import} \PY{n+nn}{random}
        \PY{n}{sample1000} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{sample}\PY{p}{(}\PY{n}{list\PYZus{}titles}\PY{p}{,} \PY{l+m+mi}{1000}\PY{p}{)}
        \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sample1000.txt}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{w}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{encoding}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{utf\PYZhy{}8}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)} \PY{k}{as} \PY{n}{f}\PY{p}{:}
            \PY{n}{f}\PY{o}{.}\PY{n}{write}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{sample1000}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \subsection{Standard modules}\label{standard-modules}

    \subsubsection{cProfile}\label{cprofile}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{k+kn}{import} \PY{n+nn}{cProfile}\PY{o}{,} \PY{n+nn}{io}\PY{o}{,} \PY{n+nn}{pstats}\PY{o}{,} \PY{n+nn}{os}
        
        \PY{k}{def} \PY{n+nf}{toprofile0}\PY{p}{(}\PY{n}{lines}\PY{p}{)}\PY{p}{:}
            \PY{n}{gain\PYZus{}dynamique\PYZus{}moyen\PYZus{}par\PYZus{}mot}\PY{p}{(}\PY{n}{lines}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{1.0}\PY{p}{]} \PY{o}{*} \PY{n+nb}{len}\PY{p}{(}\PY{n}{lines}\PY{p}{)}\PY{p}{)}
        
        \PY{k}{def} \PY{n+nf}{doprofile}\PY{p}{(}\PY{n}{lines}\PY{p}{,} \PY{n}{filename}\PY{p}{)}\PY{p}{:}
            \PY{n}{pr} \PY{o}{=} \PY{n}{cProfile}\PY{o}{.}\PY{n}{Profile}\PY{p}{(}\PY{p}{)}
            \PY{n}{pr}\PY{o}{.}\PY{n}{enable}\PY{p}{(}\PY{p}{)}
            \PY{n}{toprofile0}\PY{p}{(}\PY{n}{lines}\PY{p}{)}
            \PY{n}{pr}\PY{o}{.}\PY{n}{disable}\PY{p}{(}\PY{p}{)}
            \PY{n}{s} \PY{o}{=} \PY{n}{io}\PY{o}{.}\PY{n}{StringIO}\PY{p}{(}\PY{p}{)}
            \PY{n}{ps} \PY{o}{=} \PY{n}{pstats}\PY{o}{.}\PY{n}{Stats}\PY{p}{(}\PY{n}{pr}\PY{p}{,} \PY{n}{stream}\PY{o}{=}\PY{n}{s}\PY{p}{)}\PY{o}{.}\PY{n}{sort\PYZus{}stats}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cumulative}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
            \PY{n}{ps}\PY{o}{.}\PY{n}{print\PYZus{}stats}\PY{p}{(}\PY{p}{)}
            \PY{n}{rem} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{normpath}\PY{p}{(}\PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{os}\PY{o}{.}\PY{n}{getcwd}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{..}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{..}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{..}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
            \PY{n}{res} \PY{o}{=} \PY{n}{s}\PY{o}{.}\PY{n}{getvalue}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{n}{rem}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
            \PY{n}{ps}\PY{o}{.}\PY{n}{dump\PYZus{}stats}\PY{p}{(}\PY{n}{filename}\PY{p}{)}
            \PY{k}{return} \PY{n}{res}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{n}{r} \PY{o}{=} \PY{n}{doprofile}\PY{p}{(}\PY{n}{sample1000}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{completion.prof}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{r}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
         1225828 function calls in 1.261 seconds

   Ordered by: cumulative time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    1.261    1.261 <ipython-input-8-d2b6d910fdd7>:3(toprofile0)
        1    0.000    0.000    1.261    1.261 <ipython-input-3-684f3e860cf5>:3(gain\_dynamique\_moyen\_par\_mot)
        1    0.129    0.129    0.916    0.916 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:416(precompute\_stat)
    15148    0.260    0.000    0.662    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:504(merge\_completions)
    15148    0.277    0.000    0.281    0.000 \{built-in method builtins.\_\_build\_class\_\_\}
        1    0.051    0.051    0.216    0.216 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:451(update\_stat\_dynamic)
        1    0.087    0.087    0.107    0.107 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:203(build)
    16147    0.048    0.000    0.090    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:556(update\_dynamic\_minimum\_keystroke)
    34403    0.061    0.000    0.070    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:524(<listcomp>)
    34127    0.019    0.000    0.037    0.000 \{built-in method builtins.all\}
    16147    0.026    0.000    0.037    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:625(init\_dynamic\_minimum\_keystroke)
    16147    0.029    0.000    0.034    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:589(second\_step)
   298714    0.030    0.000    0.030    0.000 \{built-in method builtins.len\}
    15148    0.023    0.000    0.029    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:543(update\_minimum\_keystroke)
   105060    0.028    0.000    0.028    0.000 \{built-in method builtins.hasattr\}
    15149    0.003    0.000    0.027    0.000 \{method 'extend' of 'collections.deque' objects\}
    16148    0.018    0.000    0.027    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:97(unsorted\_iter)
     1001    0.016    0.000    0.023    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:132(leaves)
    15148    0.018    0.000    0.023    0.000 \{built-in method builtins.sorted\}
    93541    0.022    0.000    0.022    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:436(<genexpr>)
     3000    0.013    0.000    0.014    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:258(find)
    16147    0.011    0.000    0.013    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:20(\_\_init\_\_)
   109867    0.013    0.000    0.013    0.000 \{method 'values' of 'dict' objects\}
    22498    0.009    0.000    0.009    0.000 \{built-in method builtins.min\}
    45444    0.009    0.000    0.009    0.000 \{method 'extend' of 'list' objects\}
        1    0.001    0.001    0.009    0.009 <ipython-input-3-684f3e860cf5>:13(<listcomp>)
     1000    0.001    0.000    0.008    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:383(min\_dynamic\_keystroke2)
    48441    0.007    0.000    0.007    0.000 \{method 'pop' of 'list' objects\}
    49552    0.007    0.000    0.007    0.000 \{method 'append' of 'list' objects\}
    19255    0.007    0.000    0.007    0.000 \{built-in method builtins.max\}
    52271    0.006    0.000    0.006    0.000 \{method 'popleft' of 'collections.deque' objects\}
        1    0.001    0.001    0.006    0.006 <ipython-input-3-684f3e860cf5>:10(<listcomp>)
    35125    0.005    0.000    0.005    0.000 \{method 'append' of 'collections.deque' objects\}
        1    0.001    0.001    0.005    0.005 <ipython-input-3-684f3e860cf5>:11(<listcomp>)
    16146    0.005    0.000    0.005    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:54(\_add)
     1000    0.001    0.000    0.005    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:322(min\_keystroke0)
     1000    0.001    0.000    0.005    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:353(min\_dynamic\_keystroke)
    16148    0.005    0.000    0.005    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:518(<genexpr>)
    15148    0.004    0.000    0.004    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:509(Fake)
    15148    0.004    0.000    0.004    0.000 \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py:512(<listcomp>)
    30296    0.003    0.000    0.003    0.000 \{method 'items' of 'dict' objects\}
    17147    0.002    0.000    0.002    0.000 \{built-in method builtins.isinstance\}
        5    0.000    0.000    0.001    0.000 \{built-in method builtins.sum\}
        1    0.000    0.000    0.000    0.000 <ipython-input-3-684f3e860cf5>:7(<listcomp>)
     1001    0.000    0.000    0.000    0.000 <ipython-input-3-684f3e860cf5>:18(<genexpr>)
     1001    0.000    0.000    0.000    0.000 <ipython-input-3-684f3e860cf5>:15(<genexpr>)
     1001    0.000    0.000    0.000    0.000 <ipython-input-3-684f3e860cf5>:16(<genexpr>)
     1001    0.000    0.000    0.000    0.000 <ipython-input-3-684f3e860cf5>:17(<genexpr>)
        1    0.000    0.000    0.000    0.000 \{method 'disable' of '\_lsprof.Profiler' objects\}




    \end{Verbatim}

    \subsection{Others informations when
profiling}\label{others-informations-when-profiling}

    \subsubsection{memory\_profiler}\label{memory_profiler}

See
\href{https://pypi.python.org/pypi/memory_profiler/0.41}{memory\_profiler}.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{k+kn}{from} \PY{n+nn}{memory\PYZus{}profiler} \PY{k}{import} \PY{n}{profile}
         \PY{o}{\PYZpc{}}\PY{k}{load\PYZus{}ext} memory\PYZus{}profiler
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{o}{\PYZpc{}}\PY{k}{memit} toprofile0(sample1000)
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
peak memory: 412.05 MiB, increment: 15.60 MiB

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{k+kn}{from} \PY{n+nn}{io} \PY{k}{import} \PY{n}{StringIO}
         \PY{n}{st} \PY{o}{=} \PY{n}{StringIO}\PY{p}{(}\PY{p}{)}
         \PY{n+nd}{@profile}\PY{p}{(}\PY{n}{stream}\PY{o}{=}\PY{n}{st}\PY{p}{)}
         \PY{k}{def} \PY{n+nf}{toprofile}\PY{p}{(}\PY{n}{lines}\PY{p}{)}\PY{p}{:}
             \PY{n}{gain\PYZus{}dynamique\PYZus{}moyen\PYZus{}par\PYZus{}mot}\PY{p}{(}\PY{n}{lines}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{1.0}\PY{p}{]} \PY{o}{*} \PY{n+nb}{len}\PY{p}{(}\PY{n}{lines}\PY{p}{)}\PY{p}{)}
         \PY{n}{toprofile}\PY{p}{(}\PY{n}{sample1000}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
ERROR: Could not find file <ipython-input-12-7512ff5cdee3>
NOTE: \%mprun can only be used on functions defined in physical files, and not in the IPython environment.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{o}{\PYZpc{}\PYZpc{}}\PY{k}{file} temp\PYZus{}mem\PYZus{}profile.py
         
         from mlstatpy.nlp.completion import CompletionTrieNode
         from memory\PYZus{}profiler import profile
         
         @profile(precision=4)
         def gain\PYZus{}dynamique\PYZus{}moyen\PYZus{}par\PYZus{}mot(queries, weights):
             per = list(zip(weights, queries))
             total = sum(weights) * 1.0
             res = []
             trie = CompletionTrieNode.build([(None, q) for \PYZus{}, q in per])
             trie.precompute\PYZus{}stat()
             trie.update\PYZus{}stat\PYZus{}dynamic()
             wks = [(w, p, len(w) \PYZhy{} trie.min\PYZus{}keystroke0(w)[0]) for p, w in per]
             wks\PYZus{}dyn = [(w, p, len(w) \PYZhy{} trie.min\PYZus{}dynamic\PYZus{}keystroke(w)[0])
                        for p, w in per]
             wks\PYZus{}dyn2 = [(w, p, len(w) \PYZhy{} trie.min\PYZus{}dynamic\PYZus{}keystroke2(w)[0])
                         for p, w in per]
             gain = sum(g * p / total for w, p, g in wks)
             gain\PYZus{}dyn = sum(g * p / total for w, p, g in wks\PYZus{}dyn)
             gain\PYZus{}dyn2 = sum(g * p / total for w, p, g in wks\PYZus{}dyn2)
             ave\PYZus{}length = sum(len(w) * p / total for p, w in per)
             return gain, gain\PYZus{}dyn, gain\PYZus{}dyn2, ave\PYZus{}length
         
         @profile(precision=4)
         def toprofile():
             with open(\PYZdq{}sample1000.txt\PYZdq{}, \PYZdq{}r\PYZdq{}, encoding=\PYZdq{}utf\PYZhy{}8\PYZdq{}) as f:
                 lines = [\PYZus{}.strip(\PYZdq{}\PYZbs{}n\PYZbs{}r \PYZdq{}) for \PYZus{} in f.readlines()]
             gain\PYZus{}dynamique\PYZus{}moyen\PYZus{}par\PYZus{}mot(lines, [1.0] * len(lines))
         toprofile()
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Overwriting temp\_mem\_profile.py

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{k+kn}{import} \PY{n+nn}{sys}
         \PY{n}{cmd} \PY{o}{=} \PY{n}{sys}\PY{o}{.}\PY{n}{executable}
         \PY{k+kn}{from} \PY{n+nn}{pyquickhelper}\PY{n+nn}{.}\PY{n+nn}{loghelper} \PY{k}{import} \PY{n}{run\PYZus{}cmd}
         \PY{n}{cmd} \PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ \PYZhy{}m memory\PYZus{}profiler temp\PYZus{}mem\PYZus{}profile.py}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{out}\PY{p}{,} \PY{n}{err} \PY{o}{=} \PY{n}{run\PYZus{}cmd}\PY{p}{(}\PY{n}{cmd}\PY{p}{,} \PY{n}{wait}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{out}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Filename: temp\_mem\_profile.py

Line \#    Mem usage    Increment   Line Contents
================================================
     5  56.0625 MiB  56.0625 MiB   @profile(precision=4)
     6                             def gain\_dynamique\_moyen\_par\_mot(queries, weights):
     7  56.0625 MiB   0.0000 MiB       per = list(zip(weights, queries))
     8  56.0625 MiB   0.0000 MiB       total = sum(weights) * 1.0
     9  56.0625 MiB   0.0000 MiB       res = []
    10  62.2500 MiB   6.1875 MiB       trie = CompletionTrieNode.build([(None, q) for \_, q in per])
    11  69.5625 MiB   7.3125 MiB       trie.precompute\_stat()
    12  78.7695 MiB   9.2070 MiB       trie.update\_stat\_dynamic()
    13  78.7734 MiB   0.0039 MiB       wks = [(w, p, len(w) - trie.min\_keystroke0(w)[0]) for p, w in per]
    14  78.7969 MiB   0.0234 MiB       wks\_dyn = [(w, p, len(w) - trie.min\_dynamic\_keystroke(w)[0])
    15  78.7969 MiB   0.0000 MiB                  for p, w in per]
    16  78.7969 MiB   0.0000 MiB       wks\_dyn2 = [(w, p, len(w) - trie.min\_dynamic\_keystroke2(w)[0])
    17  78.7969 MiB   0.0000 MiB                   for p, w in per]
    18  78.7969 MiB   0.0000 MiB       gain = sum(g * p / total for w, p, g in wks)
    19  78.7969 MiB   0.0000 MiB       gain\_dyn = sum(g * p / total for w, p, g in wks\_dyn)
    20  78.7969 MiB   0.0000 MiB       gain\_dyn2 = sum(g * p / total for w, p, g in wks\_dyn2)
    21  78.7969 MiB   0.0000 MiB       ave\_length = sum(len(w) * p / total for p, w in per)
    22  78.7969 MiB   0.0000 MiB       return gain, gain\_dyn, gain\_dyn2, ave\_length


Filename: temp\_mem\_profile.py

Line \#    Mem usage    Increment   Line Contents
================================================
    24  55.9570 MiB  55.9570 MiB   @profile(precision=4)
    25                             def toprofile():
    26  55.9570 MiB   0.0000 MiB       with open("sample1000.txt", "r", encoding="utf-8") as f:
    27  56.0625 MiB   0.1055 MiB           lines = [\_.strip("\textbackslash{}n\textbackslash{}r ") for \_ in f.readlines()]
    28  78.7969 MiB  22.7344 MiB       gain\_dynamique\_moyen\_par\_mot(lines, [1.0] * len(lines))




    \end{Verbatim}

    \subsubsection{line\_profiler}\label{line_profiler}

See \href{https://github.com/rkern/line_profiler}{line\_profiler}.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} \PY{k}{def} \PY{n+nf}{lineprofile}\PY{p}{(}\PY{n}{lines}\PY{p}{)}\PY{p}{:}
             \PY{n}{gain\PYZus{}dynamique\PYZus{}moyen\PYZus{}par\PYZus{}mot}\PY{p}{(}\PY{n}{lines}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{1.0}\PY{p}{]} \PY{o}{*} \PY{n+nb}{len}\PY{p}{(}\PY{n}{lines}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:} \PY{k+kn}{from} \PY{n+nn}{mlstatpy}\PY{n+nn}{.}\PY{n+nn}{nlp}\PY{n+nn}{.}\PY{n+nn}{completion} \PY{k}{import} \PY{n}{CompletionTrieNode}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{k+kn}{from} \PY{n+nn}{line\PYZus{}profiler} \PY{k}{import} \PY{n}{LineProfiler}
         \PY{n}{prof} \PY{o}{=} \PY{n}{LineProfiler}\PY{p}{(}\PY{p}{)}
         \PY{n}{prof}\PY{o}{.}\PY{n}{add\PYZus{}function}\PY{p}{(}\PY{n}{gain\PYZus{}dynamique\PYZus{}moyen\PYZus{}par\PYZus{}mot}\PY{p}{)}
         \PY{n}{prof}\PY{o}{.}\PY{n}{add\PYZus{}function}\PY{p}{(}\PY{n}{CompletionTrieNode}\PY{o}{.}\PY{n}{precompute\PYZus{}stat}\PY{p}{)}
         \PY{n}{prof}\PY{o}{.}\PY{n}{run}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{lineprofile(sample1000)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{st} \PY{o}{=} \PY{n}{io}\PY{o}{.}\PY{n}{StringIO}\PY{p}{(}\PY{p}{)}
         \PY{n}{prof}\PY{o}{.}\PY{n}{print\PYZus{}stats}\PY{p}{(}\PY{n}{stream}\PY{o}{=}\PY{n}{st}\PY{p}{)}
         \PY{n}{rem} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{normpath}\PY{p}{(}\PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{os}\PY{o}{.}\PY{n}{getcwd}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{..}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{..}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{..}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
         \PY{n}{res} \PY{o}{=} \PY{n}{st}\PY{o}{.}\PY{n}{getvalue}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{n}{rem}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{res}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Timer unit: 3.95062e-07 s

Total time: 3.3536 s
File: <ipython-input-3-684f3e860cf5>
Function: gain\_dynamique\_moyen\_par\_mot at line 3

Line \#      Hits         Time  Per Hit   \% Time  Line Contents
==============================================================
     3                                           def gain\_dynamique\_moyen\_par\_mot(queries, weights):
     4         1        393.0    393.0      0.0      per = list(zip(weights, queries))
     5         1         23.0     23.0      0.0      total = sum(weights) * 1.0
     6         1          4.0      4.0      0.0      res = []
     7         1     379526.0 379526.0      4.5      trie = CompletionTrieNode.build([(None, q) for \_, q in per])
     8         1    6658020.0 6658020.0     78.4      trie.precompute\_stat()
     9         1    1241489.0 1241489.0     14.6      trie.update\_stat\_dynamic()
    10         1      64879.0  64879.0      0.8      wks = [(w, p, len(w) - trie.min\_keystroke0(w)[0]) for p, w in per]
    11         1         16.0     16.0      0.0      wks\_dyn = [(w, p, len(w) - trie.min\_dynamic\_keystroke(w)[0])
    12         1      58635.0  58635.0      0.7                 for p, w in per]
    13         1         10.0     10.0      0.0      wks\_dyn2 = [(w, p, len(w) - trie.min\_dynamic\_keystroke2(w)[0])
    14         1      80850.0  80850.0      1.0                  for p, w in per]
    15         1       1318.0   1318.0      0.0      gain = sum(g * p / total for w, p, g in wks)
    16         1       1221.0   1221.0      0.0      gain\_dyn = sum(g * p / total for w, p, g in wks\_dyn)
    17         1       1073.0   1073.0      0.0      gain\_dyn2 = sum(g * p / total for w, p, g in wks\_dyn2)
    18         1       1349.0   1349.0      0.0      ave\_length = sum(len(w) * p / total for p, w in per)
    19         1          4.0      4.0      0.0      return gain, gain\_dyn, gain\_dyn2, ave\_length

Total time: 2.19801 s
File: \textbackslash{}src\textbackslash{}mlstatpy\textbackslash{}nlp\textbackslash{}completion.py
Function: precompute\_stat at line 416

Line \#      Hits         Time  Per Hit   \% Time  Line Contents
==============================================================
   416                                               def precompute\_stat(self):
   417                                                   """
   418                                                   computes and stores list of completions for each node,
   419                                                   computes mks
   420                                           
   421                                                   @param      clean   clean stat
   422                                                   """
   423         1          5.0      5.0      0.0          stack = deque()
   424         1      78759.0  78759.0      1.4          stack.extend(self.leaves())
   425     52272     168548.0      3.2      3.0          while len(stack) > 0:
   426     52271     169512.0      3.2      3.0              pop = stack.popleft()
   427     52271     148123.0      2.8      2.7              if pop.stat is not None:
   428     17145      42365.0      2.5      0.8                  continue
   429     35126     105270.0      3.0      1.9              if not pop.children:
   430       999       2545.0      2.5      0.0                  pop.stat = CompletionTrieNode.\_Stat()
   431       999       5598.0      5.6      0.1                  pop.stat.completions = []
   432       999       2812.0      2.8      0.1                  pop.stat.mks0 = len(pop.value)
   433       999       2370.0      2.4      0.0                  pop.stat.mks0\_ = len(pop.value)
   434       999       2233.0      2.2      0.0                  if pop.parent is not None:
   435       999       2339.0      2.3      0.0                      stack.append(pop.parent)
   436     34127     397661.0     11.7      7.1              elif all(v.stat is not None for v in pop.children.values()):
   437     15148      55784.0      3.7      1.0                  pop.stat = CompletionTrieNode.\_Stat()
   438     15148      48358.0      3.2      0.9                  if pop.leave:
   439         1          5.0      5.0      0.0                      pop.stat.mks0 = len(pop.value)
   440         1          5.0      5.0      0.0                      pop.stat.mks0\_ = len(pop.value)
   441     15148      76740.0      5.1      1.4                  stack.extend(pop.children.values())
   442     15148    3717484.0    245.4     66.8                  pop.stat.merge\_completions(pop.value, pop.children.values())
   443     15148      62928.0      4.2      1.1                  pop.stat.next\_nodes = pop.children
   444     15148     292243.0     19.3      5.3                  pop.stat.update\_minimum\_keystroke(len(pop.value))
   445     15148      55688.0      3.7      1.0                  if pop.parent is not None:
   446     15147      64826.0      4.3      1.2                      stack.append(pop.parent)
   447                                                       else:
   448                                                           \# we'll do it again later
   449     18979      61515.0      3.2      1.1                  stack.append(pop)



    \end{Verbatim}

    \subsection{Static Visualization}\label{static-visualization}

    \subsubsection{gprof2dot}\label{gprof2dot}

See \href{https://github.com/jrfonseca/gprof2dot}{gprof2dot}.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}18}]:} \PY{k+kn}{import} \PY{n+nn}{gprof2dot}
         \PY{k+kn}{import} \PY{n+nn}{sys}
         \PY{n}{sys}\PY{o}{.}\PY{n}{argv}\PY{o}{=}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZhy{}f}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{pstats}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{completion.prof}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZhy{}o}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{completion.dot}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{gprof2dot}\PY{o}{.}\PY{n}{main}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}19}]:} \PY{k+kn}{from} \PY{n+nn}{pyquickhelper}\PY{n+nn}{.}\PY{n+nn}{helpgen}\PY{n+nn}{.}\PY{n+nn}{conf\PYZus{}path\PYZus{}tools} \PY{k}{import} \PY{n}{find\PYZus{}graphviz\PYZus{}dot}
         \PY{n}{dot} \PY{o}{=} \PY{n}{find\PYZus{}graphviz\PYZus{}dot}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}20}]:} \PY{k+kn}{from} \PY{n+nn}{pyquickhelper}\PY{n+nn}{.}\PY{n+nn}{loghelper} \PY{k}{import} \PY{n}{run\PYZus{}cmd}
         \PY{n}{out}\PY{p}{,} \PY{n}{err} \PY{o}{=} \PY{n}{run\PYZus{}cmd}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+si}{\PYZob{}0\PYZcb{}}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{ completion.dot \PYZhy{}Tpng \PYZhy{}ocompletion.png}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{dot}\PY{p}{)}\PY{p}{,} \PY{n}{wait}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{out}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]


    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{k+kn}{from} \PY{n+nn}{pyquickhelper}\PY{n+nn}{.}\PY{n+nn}{helpgen} \PY{k}{import} \PY{n}{NbImage}
         \PY{n}{name} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{completion.png}\PY{l+s+s2}{\PYZdq{}}
         \PY{k}{if} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{exists}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{images/completion.jpg}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{:}
             \PY{n}{name} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{images/completion.jpg}\PY{l+s+s2}{\PYZdq{}}
         \PY{n}{NbImage}\PY{p}{(}\PY{n}{name}\PY{p}{,} \PY{n}{width}\PY{o}{=}\PY{l+m+mi}{800}\PY{p}{)}
\end{Verbatim}

\texttt{\color{outcolor}Out[{\color{outcolor}21}]:}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_30_0.jpeg}
    \end{center}
    { \hspace*{\fill} \\}
    

    \subsubsection{pyinstrument}\label{pyinstrument}

See \href{https://github.com/joerick/pyinstrument}{pyinstrument}.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}22}]:} \PY{k+kn}{from} \PY{n+nn}{pyinstrument} \PY{k}{import} \PY{n}{Profiler}
         
         \PY{n}{profiler} \PY{o}{=} \PY{n}{Profiler}\PY{p}{(}\PY{n}{use\PYZus{}signal}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
         \PY{n}{profiler}\PY{o}{.}\PY{n}{start}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{toprofile0}\PY{p}{(}\PY{n}{sample1000}\PY{p}{)}
         
         \PY{n}{profiler}\PY{o}{.}\PY{n}{stop}\PY{p}{(}\PY{p}{)}
         \PY{n}{out} \PY{o}{=} \PY{n}{profiler}\PY{o}{.}\PY{n}{output\PYZus{}text}\PY{p}{(}\PY{n}{unicode}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{n}{out}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}\PYZbs{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{/}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
\_\_main\_\_:3: DeprecationWarning: use\_signal is deprecated and should no longer be used.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
1.414 gain\_dynamique\_moyen\_par\_mot  <ipython-input-3-684f3e860cf5>:3
|- 1.050 precompute\_stat  mlstatpy/nlp/completion.py:416
|  |- 0.846 merge\_completions  mlstatpy/nlp/completion.py:504
|  |  `- 0.071 <listcomp>  mlstatpy/nlp/completion.py:524
|  |- 0.027 <genexpr>  mlstatpy/nlp/completion.py:436
|  |- 0.026 leaves  mlstatpy/nlp/completion.py:132
|  `- 0.015 update\_minimum\_keystroke  mlstatpy/nlp/completion.py:543
|- 0.235 update\_stat\_dynamic  mlstatpy/nlp/completion.py:451
|  |- 0.119 update\_dynamic\_minimum\_keystroke  mlstatpy/nlp/completion.py:556
|  |  `- 0.037 second\_step  mlstatpy/nlp/completion.py:589
|  |- 0.041 init\_dynamic\_minimum\_keystroke  mlstatpy/nlp/completion.py:625
|  `- 0.020 unsorted\_iter  mlstatpy/nlp/completion.py:97
`- 0.096 build  mlstatpy/nlp/completion.py:203
   `- 0.019 \_\_init\_\_  mlstatpy/nlp/completion.py:20


    \end{Verbatim}

    \subsection{Javascript Visualization}\label{javascript-visualization}

    \subsubsection{SnakeViz}\label{snakeviz}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}23}]:} \PY{o}{\PYZpc{}}\PY{k}{load\PYZus{}ext} snakeviz
\end{Verbatim}


    L'instruction qui suit lance l'explorateur par défaut avec les données
du profilage.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}24}]:} \PY{c+c1}{\PYZsh{} \PYZpc{}snakeviz toprofile0(sample1000)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}25}]:} \PY{k+kn}{from} \PY{n+nn}{pyquickhelper}\PY{n+nn}{.}\PY{n+nn}{helpgen} \PY{k}{import} \PY{n}{NbImage}
         \PY{n}{NbImage}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{images/func\PYZus{}info.jpg}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{width}\PY{o}{=}\PY{l+m+mi}{400}\PY{p}{)}
\end{Verbatim}

\texttt{\color{outcolor}Out[{\color{outcolor}25}]:}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_38_0.jpeg}
    \end{center}
    { \hspace*{\fill} \\}
    

    \subsubsection{vprof}\label{vprof}

See \href{https://github.com/nvdv/vprof}{vprof}.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}26}]:} \PY{k+kn}{from} \PY{n+nn}{vprof} \PY{k}{import} \PY{n}{profiler}
         
         \PY{c+c1}{\PYZsh{} needs to be run from a file not from a notebook}
         \PY{c+c1}{\PYZsh{} profiler.run(toprofile0, \PYZsq{}cmh\PYZsq{}, args=(sample1000,), host=\PYZsq{}localhost\PYZsq{}, port=8000)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}27}]:} \PY{k+kn}{from} \PY{n+nn}{pyquickhelper}\PY{n+nn}{.}\PY{n+nn}{helpgen} \PY{k}{import} \PY{n}{NbImage}
         \PY{n}{NbImage}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{images/vprof.jpg}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{width}\PY{o}{=}\PY{l+m+mi}{800}\PY{p}{)}
\end{Verbatim}

\texttt{\color{outcolor}Out[{\color{outcolor}27}]:}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_41_0.jpeg}
    \end{center}
    { \hspace*{\fill} \\}
    


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
